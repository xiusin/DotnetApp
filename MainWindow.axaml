<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="500" d:DesignHeight="400"
        x:Class="ConfigButtonDisplay.MainWindow"
        Title="键盘按键显示器"
        WindowStartupLocation="CenterScreen"
        ShowInTaskbar="True">
    
    <Grid RowDefinitions="Auto,*,Auto" Margin="20">
        <!-- 标题栏 -->
        <Border Grid.Row="0" Background="{DynamicResource SystemAccentColor}" CornerRadius="8" Padding="20" Margin="0,0,0,20">
            <StackPanel>
                <TextBlock Text="键盘按键显示器" 
                          FontSize="24" 
                          FontWeight="SemiBold" 
                          HorizontalAlignment="Center"
                          Margin="0,0,0,10"
                          Foreground="White"/>
                <TextBlock Text="按下键盘按键，将在屏幕左下角实时显示" 
                          FontSize="14" 
                          HorizontalAlignment="Center"
                          Foreground="White"
                          TextAlignment="Center"
                          Opacity="0.9"/>
            </StackPanel>
        </Border>
        
        <!-- 主要内容 -->
        <Border Grid.Row="1" Background="{DynamicResource SystemControlBackgroundChromeMediumBrush}" CornerRadius="8" Padding="20" Margin="0,0,0,20">
            <StackPanel Spacing="20">
                <!-- 状态显示 -->
                <Grid ColumnDefinitions="*,2*">
                    <TextBlock Grid.Column="0" Text="监听状态:" 
                              VerticalAlignment="Center"
                              FontSize="16"/>
                    <ToggleSwitch Grid.Column="1" 
                                   Name="ListeningToggle"
                                   IsChecked="True"
                                   OffContent="已停止"
                                   OnContent="监听中"
                                   IsCheckedChanged="ListeningToggle_Toggled"/>
                </Grid>
                
                <!-- 显示设置 -->
                <TextBlock Text="显示设置" FontSize="18" FontWeight="SemiBold" Margin="0,10,0,0"/>
                
                <Grid ColumnDefinitions="Auto,*" RowDefinitions="Auto,Auto,Auto">
                    <TextBlock Grid.Row="0" Grid.Column="0" Text="背景颜色:" VerticalAlignment="Center"/>
                    <ComboBox Grid.Row="0" Grid.Column="1" Name="BackgroundColorCombo" SelectedIndex="0" SelectionChanged="BackgroundColorCombo_SelectionChanged">
                        <ComboBoxItem>蓝色</ComboBoxItem>
                        <ComboBoxItem>绿色</ComboBoxItem>
                        <ComboBoxItem>红色</ComboBoxItem>
                        <ComboBoxItem>紫色</ComboBoxItem>
                        <ComboBoxItem>橙色</ComboBoxItem>
                    </ComboBox>
                    
                    <TextBlock Grid.Row="1" Grid.Column="0" Text="显示时长:" VerticalAlignment="Center"/>
                    <Slider Grid.Row="1" Grid.Column="1" Name="DisplayDurationSlider" 
                           Minimum="1" Maximum="5" Value="2" TickFrequency="0.5"
                           IsSnapToTickEnabled="True"/>
                    
                    <TextBlock Grid.Row="2" Grid.Column="0" Text="字体大小:" VerticalAlignment="Center"/>
                    <Slider Grid.Row="2" Grid.Column="1" Name="FontSizeSlider" 
                           Minimum="12" Maximum="48" Value="24" TickFrequency="2"
                           IsSnapToTickEnabled="True"/>
                </Grid>
                
                <!-- 预览 -->
                <Border Name="PreviewBorder" 
                       Background="{DynamicResource SystemAccentColor}"
                       CornerRadius="8"
                       Padding="20"
                       Margin="0,10,0,0">
                    <TextBlock Name="PreviewText" 
                              Text="按键预览"
                              FontSize="24"
                              FontWeight="SemiBold"
                              HorizontalAlignment="Center"
                              Foreground="White"/>
                </Border>
            </StackPanel>
        </Border>
        
        <!-- 状态栏 -->
        <Border Grid.Row="2" Background="{DynamicResource SystemControlBackgroundChromeMediumBrush}" CornerRadius="8" Padding="15">
            <Grid ColumnDefinitions="*,Auto,Auto">
                <TextBlock Grid.Column="0" Name="StatusText" 
                          Text="准备就绪 - 点击开始监听"
                          VerticalAlignment="Center"
                          Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
                <Button Grid.Column="1" Name="TestButton" 
                       Content="测试显示"
                       Click="TestButton_Click" Margin="0,0,10,0"/>
                <Button Grid.Column="2" Name="HideButton" 
                       Content="隐藏窗口"
                       Click="HideButton_Click"/>
            </Grid>
        </Border>
    </Grid>
</Window>
